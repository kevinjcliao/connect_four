<!doctype html>
<html lang="en">
<head>
<title></title>
<!-- 2021-02-26 Fri 11:34 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Org-mode">
<meta name="author" content="Kevin Liao">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<style>
/* org mode styles on top of twbs */

html {
    position: relative;
    min-height: 100%;
}

body {
    font-size: 18px;
    margin-bottom: 105px;
}

footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 101px;
    background-color: #f5f5f5;
}

footer > div {
    padding: 10px;
}

footer p {
    margin: 0 0 5px;
    text-align: center;
    font-size: 16px;
}

#table-of-contents {
    margin-top: 20px;
    margin-bottom: 20px;
}

blockquote p {
    font-size: 18px;
}

pre {
    font-size: 16px;
}

.footpara {
    display: inline-block;
}

figcaption {
  font-size: 16px;
  color: #666;
  font-style: italic;
  padding-bottom: 15px;
}

/* from twbs docs */

.bs-docs-sidebar.affix {
    position: static;
}
@media (min-width: 768px) {
    .bs-docs-sidebar {
        padding-left: 20px;
    }
}

/* All levels of nav */
.bs-docs-sidebar .nav > li > a {
    display: block;
    padding: 4px 20px;
    font-size: 14px;
    font-weight: 500;
    color: #999;
}
.bs-docs-sidebar .nav > li > a:hover,
.bs-docs-sidebar .nav > li > a:focus {
    padding-left: 19px;
    color: #A1283B;
    text-decoration: none;
    background-color: transparent;
    border-left: 1px solid #A1283B;
}
.bs-docs-sidebar .nav > .active > a,
.bs-docs-sidebar .nav > .active:hover > a,
.bs-docs-sidebar .nav > .active:focus > a {
    padding-left: 18px;
    font-weight: bold;
    color: #A1283B;
    background-color: transparent;
    border-left: 2px solid #A1283B;
}

/* Nav: second level (shown on .active) */
.bs-docs-sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 30px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav > li > a:focus {
    padding-left: 29px;
}
.bs-docs-sidebar .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav > .active:focus > a {
    padding-left: 28px;
    font-weight: 500;
}

/* Nav: third level (shown on .active) */
.bs-docs-sidebar .nav .nav .nav {
    padding-bottom: 10px;
}
.bs-docs-sidebar .nav .nav .nav > li > a {
    padding-top: 1px;
    padding-bottom: 1px;
    padding-left: 40px;
    font-size: 12px;
    font-weight: normal;
}
.bs-docs-sidebar .nav .nav .nav > li > a:hover,
.bs-docs-sidebar .nav .nav .nav > li > a:focus {
    padding-left: 39px;
}
.bs-docs-sidebar .nav .nav .nav > .active > a,
.bs-docs-sidebar .nav .nav .nav > .active:hover > a,
.bs-docs-sidebar .nav .nav .nav > .active:focus > a {
    padding-left: 38px;
    font-weight: 500;
}

/* Show and affix the side nav when space allows it */
@media (min-width: 992px) {
    .bs-docs-sidebar .nav > .active > ul {
        display: block;
    }
    /* Widen the fixed sidebar */
    .bs-docs-sidebar.affix,
    .bs-docs-sidebar.affix-bottom {
        width: 213px;
    }
    .bs-docs-sidebar.affix {
        position: fixed; /* Undo the static from mobile first approach */
        top: 20px;
    }
    .bs-docs-sidebar.affix-bottom {
        position: absolute; /* Undo the static from mobile first approach */
    }
    .bs-docs-sidebar.affix .bs-docs-sidenav,.bs-docs-sidebar.affix-bottom .bs-docs-sidenav {
        margin-top: 0;
        margin-bottom: 0
    }
}
@media (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .bs-docs-sidebar.affix-bottom,
    .bs-docs-sidebar.affix {
        width: 263px;
    }
}
</style>
<script>
$(function() {
    'use strict';

    $('.bs-docs-sidebar li').first().addClass('active');

    $(document.body).scrollspy({target: '.bs-docs-sidebar'});

    $('.bs-docs-sidebar').affix();
});
</script>
</head>
<body>
<div id="content" class="container">
<div class="row"><div class="col-md-3 col-md-push-9"></div><div class="col-md-9 col-md-pull-3"><h1 class="title"></h1>
<p>
import React from &ldquo;react&rdquo;;
import logo from &ldquo;./logo.svg&rdquo;;
import &ldquo;./App.css&rdquo;;
</p>

<p>
const ROWS = 6;
const COLUMNS = 7;
const VICTORY<sub>LENGTH</sub> = 4;
</p>

<p>
function App() {
  return (
    &lt;body&gt;
      &lt;div className=&ldquo;App&rdquo;&gt;
        &lt;Board /&gt;
      &lt;/div&gt;
    &lt;/body&gt;
  );
}
</p>

<p>
// Array is 7 by 6
class Board extends React.Component&lt;
  {},
  { board: (string | null)[][]; xIsNext: boolean }
&gt; {
  constructor(props: any) {
    super(props);
</p>

<p>
  this.state = {
    board: Array(ROWS).fill(Array(COLUMNS).fill("Empty")),
    xIsNext: true,
  };
}
</p>

<p>
/**
</p>
<ul class="org-ul">
<li>Returns the string containing victor name, null if no victor yet.
</li>
</ul>
<p>
 */
calculateVictor(board: (string | null)[][]): string | null {
  // TODO: Implement diagonal victory check
</p>

<p>
// Implement victory condition check for if a single row is victorious
const rowConditionChecker = (
  row: (string | null)[],
  winner: string
): boolean =&gt; {
  // Creates a substring to search for victory (e.g. XXXX)
  const victoryString = Array(VICTORY<sub>LENGTH</sub>).fill(winner).join();
  // Checks if this substring exissts in this row.
  return row.join().includes(victoryString);
};
</p>

<p>
const arrayConditionChecker = (
  rows: (string | null)[][],
  winner: string
): boolean =&gt; {
  return rows.filter((row) =&gt; rowConditionChecker(row, winner)).length &gt; 0;
};
</p>

<p>
const transposedBoard = Array(COLUMNS).fill((_, index) =&gt;
  this.getColumn(index)
);
</p>

<p>
const xWins =
  arrayConditionChecker(board, &ldquo;X&rdquo;) ||
  arrayConditionChecker(transposedBoard, &ldquo;X&rdquo;);
const oWins = arrayConditionChecker(board, &ldquo;O&rdquo;);
</p>

<p>
if (xWins) {
  return &ldquo;X&rdquo;;
}
</p>

<p>
if (oWins) {
  return &ldquo;O&rdquo;;
}
</p>

<p>
const transposedBoard = Array(COLUMNS)
  .fill(null)
  .map((_, index) =&gt; this.getColumn(index));
</p>

<p>
  return null;
}
</p>

<p>
/*
</p>
<ul class="org-ul">
<li>Sets state when a user adds a coin to a column.
</li>
</ul>
<p>
 */
handleClick(column: number): void {
  this.setState({
    board: this.depositCoin(column, this.state.xIsNext ? "X" : "O"),
    xIsNext: !this.state.xIsNext,
  });
}
</p>

<p>
/**
</p>
<ul class="org-ul">
<li>Helper method.
</li>
</ul>
<p>
 */
depositCoin(column<sub>index</sub>: number, new<sub>val</sub>: string): (string | null)[][] {
  const board = this.state.board.slice();
</p>

<p>
  const row<sub>index</sub> = this.getRowIndex(column<sub>index</sub>);
  if (row<sub>index</sub> &lt; 0) {
    alert(&ldquo;Coin overflow!&rdquo;);
    return board;
  }
  const row = board[row<sub>index</sub>].slice();
  row[column<sub>index</sub>] = new<sub>val</sub>;
  board[row<sub>index</sub>] = row;
  return board;
}
</p>

<p>
/**
</p>
<ul class="org-ul">
<li>Returns the column as an array
</li>
</ul>
<p>
 */
getColumn(column<sub>index</sub>: number): (string | null)[] {
  return this.state.board.slice().map((row) =&gt; row[column<sub>index</sub>]);
}
</p>

<p>
/**
</p>
<ul class="org-ul">
<li>Returns the row index that has yet to have a coin deposited.
</li>
</ul>
<p>
 */
getRowIndex(column<sub>index</sub>: number): number {
  const board = this.state.board.slice();
  const board<sub>column</sub> = board.map((row) =&gt; row[column<sub>index</sub>]);
  const row<sub>index</sub> = board<sub>column.findIndex</sub>((row<sub>item</sub>) =&gt; {
    <i>/ TypeScript catches that sometimes findIndex will pass in a null
    /</i> which we handle.
    if (row<sub>item</sub> <code>=</code> null) {
      return false;
    }
    const matches = row<sub>item.match</sub>(<i>^(X|O)$</i>);
    return matches !== null &amp;&amp; matches.length &gt; 0;
  });
</p>

<p>
// If no coins are found, deposit coin at the bottom.
if (row<sub>index</sub> <code>=</code> -1) {
  return this.state.board.length - 1;
}
</p>

<p>
  return row<sub>index</sub> - 1;
}
</p>

<p>
  render() {
    let status = &ldquo;Player &rdquo; + (this.state.xIsNext ? &ldquo;X&rdquo; : &ldquo;O&rdquo;) + &ldquo; goes next.&rdquo;;
    const victor = this.calculateVictor(this.state.board);
    if (victor !== null) {
      status = &ldquo;Player &rdquo; + victor + &ldquo; has won.&rdquo;;
    }
    return (
      &lt;div&gt;
        &lt;p&gt;{status}&lt;/p&gt;
        &lt;table&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              {Array(COLUMNS)
                .fill(null)
                .map((i, index) =&gt; (
                  &lt;th&gt;
                    &lt;Button
                      column={index}
                      key={index}
                      onClick={() =&gt; this.handleClick(index)}
                    /&gt;
                  &lt;/th&gt;
                ))}
            &lt;/tr&gt;
            {this.state.board.map((row<sub>num</sub>, index) =&gt; (
              &lt;tr key={index}&gt;
                {this.state.board[index].map((i, column<sub>index</sub>) =&gt; (
                  &lt;td key={column<sub>index</sub>}&gt;
                    {this.state.board[index][column<sub>index</sub>]}
                  &lt;/td&gt;
                ))}
              &lt;/tr&gt;
            ))}
          &lt;/thead&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    );
  }
}
</p>

<p>
function Button(props: { onClick: () =&gt; void; column: number }) {
  return (
    &lt;button type=&ldquo;button&rdquo; onClick={() =&gt; props.onClick()}&gt;
      {&ldquo;Row&rdquo; + props.column}
    &lt;/button&gt;
  );
}
</p>

<p>
export default App;
</p>
</div></div></div>
<footer id="postamble" class="">
<div><p class="author">Author: Kevin Liao</p>
<p class="date">Created: 2021-02-26 Fri 11:34</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="http://orgmode.org">Org-mode</a> 9.4)</p>
</div>
</footer>
</body>
</html>
